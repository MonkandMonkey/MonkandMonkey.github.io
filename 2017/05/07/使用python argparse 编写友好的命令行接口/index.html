<!DOCTYPE html>
<html lang="zh-CN">

<!-- Head tag -->
<head>
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">

  <!--Description-->
  

  <!--Author-->
  
  <meta name="author" content="MonkandMonkey">
  

  <!--Open Graph Title-->
  
      <meta property="og:title" content="ä½¿ç”¨ python argparse: ç¼–å†™å‹å¥½çš„å‘½ä»¤è¡Œæ¥å£"/>
  
  <!--Open Graph Description-->
  
  <!--Open Graph Site Name-->
  <meta property="og:site_name" content="Amy"/>
  <!--Type page-->
  
      <meta property="og:type" content="article" />
  
  <!--Page Cover-->
  

  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  <!-- Title -->
  
  <title>ä½¿ç”¨ python argparse: ç¼–å†™å‹å¥½çš„å‘½ä»¤è¡Œæ¥å£ - Amy</title>


  <link rel="shortcut icon" href="/images/amy/bath.png">

  <!-- Custom CSS/Sass -->
  <link rel="stylesheet" href="/css/style.css">

  <!----------------------------
  https://github.com/GallenHu/hexo-theme-Daily

 _____            _   _
|  __ \          (_) | |
| |  | |   __ _   _  | |  _   _
| |  | |  / _` | | | | | | | | |
| |__| | | (_| | | | | | | |_| |
|_____/   \__,_| |_| |_|  \__, |
                          __/ |
                         |___/

    ---------------------------><!-- hexo-inject:begin --><!-- hexo-inject:end -->

</head>


<body>

  <!-- hexo-inject:begin --><!-- hexo-inject:end --><!-- Nav -->
  <header class="site-header">
  <div class="header-inside">
    <div class="logo">
      <a href="/" rel="home">
        
        <img src="/images/amy/owl.jpg" alt="Amy" height="60">
        
      </a>
    </div>
    <!-- Navigation -->
    <nav class="navbar">
      <!-- Collect the nav links, forms, and other content for toggling -->
      <div class="collapse">
        <ul class="navbar-nav">
          
          
            <li>
              <a href="/.">
                
                  Home
                
              </a>
            </li>
          
            <li>
              <a href="/archives">
                
                  Archive
                
              </a>
            </li>
          
            <li>
              <a href="/about">
                
                  About
                
              </a>
            </li>
          
        </ul>
      </div>
      <!-- /.navbar-collapse -->
    </nav>
    <div class="button-wrap">
      <button class="menu-toggle">Primary Menu</button>
    </div>
  </div>
</header>


  <!-- Main Content -->
  <div class="content-area">
  <div class="post">
    <!-- Post Content -->
    <div class="container">
      <article>
        <!-- Title date & tags -->
        <div class="post-header">
          <h1 class="entry-title">
            ä½¿ç”¨ python argparse: ç¼–å†™å‹å¥½çš„å‘½ä»¤è¡Œæ¥å£
            
          </h1>
          <p class="posted-on">
          2017-05-07
          </p>
          <div class="tags-links">
            
              
                <a href="/tags/tech/" rel="tag">
                  tech
                </a>
              
                <a href="/tags/python/" rel="tag">
                  python
                </a>
              
                <a href="/tags/arg/" rel="tag">
                  arg
                </a>
              
            
          </div>
        </div>
        <!-- Post Main Content -->
        <div class="entry-content">
          <p>Python çš„ *args å’Œ kwargs æ€»æ˜¯æ„Ÿè§‰å¯¹äººä¸å¤ªå‹å¥½ï¼Œç›´åˆ° <strong>argparse</strong> æ¨¡å—çš„å‡ºç°è§£æ•‘äº†æˆ‘ï¼å­¦ä¹  <a href="https://docs.python.org/3/howto/argparse.html" target="_blank" rel="external">argparse Tutorial</a> çš„æ—¶å€™åˆä¸å°å¿ƒå‘ç°äº†æ ¼å¼åŒ–å­—ç¬¦ä¸²çš„å‡½æ•°<a href="https://pyformat.info/" target="_blank" rel="external">&quot;str&quot;.format</a>,ç¬é—´ï¼Œæœ‰äº†ä¸€ç§è¿›åŸçš„æ„Ÿè§‰ã€‚<br>
<img src="http://img.boqiicdn.com/Data/Bbs/Users/132/13229/1322908/img90981381981050.gif" alt="dakang"></p>
<p>argparseæ¨¡å—ä½¿å¾—ç¼–å†™ç”¨æˆ·å‹å¥½çš„å‘½ä»¤è¡Œæ¥å£éå¸¸å®¹æ˜“ã€‚ç¨‹åºåªéœ€å®šä¹‰å¥½å®ƒè¦æ±‚çš„å‚æ•°ï¼Œç„¶åargparseå°†è´Ÿè´£å¦‚ä½•ä»sys.argvä¸­è§£æå‡ºè¿™äº›å‚æ•°ã€‚argparseæ¨¡å—è¿˜ä¼šè‡ªåŠ¨ç”Ÿæˆå¸®åŠ©å’Œä½¿ç”¨ä¿¡æ¯å¹¶ä¸”å½“ç”¨æˆ·èµ‹ç»™ç¨‹åºéæ³•çš„å‚æ•°æ—¶äº§ç”Ÿé”™è¯¯ä¿¡æ¯ã€‚</p>
<p>é¦–å…ˆå‡†å¤‡ä¸€ä¸‹åŸºç¡€çŸ¥è¯†ï¼š<br>
argumentså³ï¼šå‚æ•°ï¼Œå‡½æ•°è¢«è°ƒç”¨æ—¶ï¼Œå¿…é¡»è¦çŸ¥é“çš„ä¸€äº›ä¿¡æ¯ã€‚æœ‰æ—¶å‡½æ•°éœ€è¦æ¥æ”¶ä¸æ­¢ä¸€ä¸ªå‚æ•°ï¼Œè¿™ä¹ˆå¤šå‚æ•°ï¼Œå®ƒå¦‚ä½•ä¸€ä¸€å¯¹ä¸Šå·å‘¢ï¼Ÿè¿™ä¸ªå¯¹å·å…¥åº§çš„ç­–ç•¥å°±æ˜¯Pythonçš„å‚æ•°ä¼ é€’æœºåˆ¶ã€‚</p>
<h3>ç­–ç•¥1 - positional arguments: ä½ç½®å‚æ•°</h3>
<p>ä½ç½®å‚æ•°å³ï¼šå‡½æ•°å’Œå¤§å®¶å£°æ˜å¥½äº†ï¼Œä¼ ç»™æˆ‘çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯æ¢¨ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯æ£ï¼Œç¬¬ä¸‰ä¸ªå‚æ•°æ˜¯è¥¿ç“œï¼Œä½ ä»¬è°ƒç”¨æˆ‘çš„æ—¶å€™å¿…é¡»æŒ‰ç…§è¿™ä¸ªé¡ºåºæ¥ï¼Œå‡ºé”™äº†æˆ‘å¯ä¸è´Ÿè´£å“¦ï¼ğŸ˜<br>
ä¼˜ç‚¹ï¼šè¾“å…¥ç®€æ´ï¼Œæ–¹ä¾¿
ç¼ºç‚¹ï¼šå‚æ•°å¤šæ—¶ï¼Œå‡†ç¡®è®°ä½é¡ºåºå›°éš¾ï¼Œè¾“å…¥é‡ä¹Ÿå¾ˆå¤§ã€‚</p>
<p><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># å®šä¹‰</span></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">subtract</span><span class="params">(a, b)</span>:</span></div><div class="line">	<span class="keyword">return</span> a-b</div><div class="line"><span class="comment"># è°ƒç”¨</span></div><div class="line">subtract(<span class="number">3</span>,<span class="number">2</span>)</div></pre></td></tr></table></figure></p>
<h3>ç­–ç•¥2 - keyword arguments: å…³é”®å­—å‚æ•°</h3>
<p>å¦‚æœä½ å®åœ¨è®°ä¸ä½å‚æ•°çš„é¡ºåºï¼Œä½†ä½ å¯ä»¥è®°å¾—ä½ å‚æ•°çš„åå­—ï¼Œé‚£ä¹ˆä½ å¯ä»¥ä½¿ç”¨keyword arguments,å¸¸å¸¸è§åˆ°Githubä¸Šåˆ«äººå®¶çš„ä»£ç å……æ–¥ç€ <em>*args</em> , <em>kwargs</em> è¿™äº›å¤©ä¹¦ä¸€èˆ¬çš„ç¬¦å·ï¼Œçœ‹å¾—éƒ½æ™•äº†ï¼Œä½†å…¶å®ï¼Œå®ƒä»¬è™½ç„¶å†™èµ·æ¥æ¯”è¾ƒå¤æ‚ï¼Œä½†æ˜¯å¯¹äºè°ƒç”¨è€…æ¥è¯´å´ååˆ†æ–¹ä¾¿ã€‚ä½¿ç”¨æ—¶ï¼Œä¸å¿…è®°ä½æ¯ä¸ªå‚æ•°çš„é¡ºåºï¼Œåªéœ€å‘Šè¯‰å‡½æ•°æˆ‘è¿™ä¸ªå‚æ•°çš„åå­—å’Œå€¼ï¼Œå‡½æ•°å°±çŸ¥é“å¦‚ä½•å¯¹åº”ã€‚å¦‚æœä½ è§‰å¾—è¾“å…¥åå­—å¤ªéº»çƒ¦ï¼ŒæŒ‰é¡ºåºç»™å‚æ•°ä¹Ÿå¯ä»¥ï¼Œå…¼å®¹ä½ç½®å‚æ•°ã€‚
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># å®šä¹‰</span></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">subtract</span><span class="params">(substract_start, substract_end)</span>:</span></div><div class="line">	<span class="keyword">return</span> substract_start-substract_end</div><div class="line"><span class="comment"># è°ƒç”¨: 3-2=?</span></div><div class="line">subtract(<span class="number">3</span>, <span class="number">2</span>)</div><div class="line">subtract(substract_end=<span class="number">2</span>, substract_start=<span class="number">3</span>)</div></pre></td></tr></table></figure></p>
<h3>ç­–ç•¥3 - optional arguments: å¯é€‰å‚æ•°</h3>
<p>å®é™…ä¸Šï¼Œæˆ‘ä»¬å¸¸å¸¸åªä¼šç”¨åˆ°å‡½æ•°çš„ä¸€éƒ¨åˆ†å‚æ•°ï¼Œå¦‚æœæƒ³è¦ä½ çš„å‡½æ•°å¯¹åˆ«äººå‹å¥½ä¸€äº›ï¼Œé‚£å°±å¾—è¾›è‹¦ä¸€ä¸‹åœ¨ä»£ç é‡Œå¤šå†™å‡ è¡Œäº†ã€‚å¦‚æœè°ƒç”¨è€…åˆ¶å®šäº†å‚æ•°çš„å€¼ï¼Œé‚£å°±ä½¿ç”¨è¿™ä¸ªå€¼ï¼Œå¦‚æœæ²¡æœ‰ï¼Œé‚£å°±ä½¿ç”¨é»˜è®¤å€¼ã€‚</p>
<p><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># å®šä¹‰</span></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">subtract</span><span class="params">(substract_start, substract_end)</span>:</span></div><div class="line">    <span class="keyword">return</span> substract_start-substract_end</div><div class="line"><span class="comment"># è°ƒç”¨: 3-2=?</span></div><div class="line">subtract(<span class="number">3</span>) <span class="comment"># 3-1=?</span></div><div class="line">subtract(substract_start=<span class="number">3</span>) <span class="comment"># 3-1=?</span></div><div class="line">subtract(substract_end=<span class="number">2</span>, substract_start=<span class="number">3</span>) <span class="comment"># 3-2=?</span></div></pre></td></tr></table></figure></p>
<h3>argeparse ä½¿ç”¨</h3>
<p>éœ€è¦æ³¨æ„çš„ä¸€ç‚¹ï¼š argparse ç”¨äºç¼–å†™<strong>ç”¨æˆ·</strong>äº¤äº’å‘½ä»¤è¡Œæ¥å£ï¼Œå‰é¢æˆ‘ä»¬è¯´çš„æ˜¯å‡½æ•°è°ƒç”¨çš„æ¥å£ï¼Œè¿™ä¸€ç‚¹è¦æ¸…æ¥šã€‚argparseèƒ½è®©ä½ çš„ç¨‹åºæ›´åŠ å‹å¥½ï¼Œæ›´åŠ é²æ£’ï¼Œç”¨æˆ·çš„è‚†æ„è¾“å…¥ä¹Ÿä¸ä¼šè®©å®ƒå´©æºƒï¼ŒåŒæ—¶è¿˜èƒ½æä¾›æç¤ºä¿¡æ¯ï¼Œå‘Šè¯‰ç”¨æˆ·å¦‚ä½•æ­£ç¡®åœ°ä½¿ç”¨ä½ çš„ç¨‹åºã€‚<br>
ä¸‹é¢æˆ‘ä»¬é€šè¿‡æ —å­æ¥çœ‹çœ‹ï¼Œargparseåˆ°åº•æœ‰å¤šæ–¹ä¾¿ï¼š
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div></pre></td><td class="code"><pre><div class="line"><span class="string">""" Command-line arg parsing library</span></div><div class="line">    Example Usage:</div><div class="line">    - python learn_argparse.py -h</div><div class="line">    - python learn_argparse.py "hello"</div><div class="line">    - python learn_argparse.py "hello" -d 1.66 -f</div><div class="line">    - python learn_argparse.py "hello" -d 1.66 -f -t clean</div><div class="line">"""</div><div class="line"><span class="keyword">import</span> argparse</div><div class="line"></div><div class="line"></div><div class="line"><span class="comment"># =========================</span></div><div class="line"><span class="comment"># CPython argparse Example</span></div><div class="line"><span class="comment"># =========================</span></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">test</span><span class="params">()</span>:</span></div><div class="line">    parser = argparse.ArgumentParser()</div><div class="line">    <span class="comment"># add arguments</span></div><div class="line">    parser.add_argument(<span class="string">"echo"</span>, help=<span class="string">"echo the string you use here"</span>)</div><div class="line">    parser.add_argument(<span class="string">"-d"</span>, <span class="string">"--double"</span>, help=<span class="string">"double the number you input here"</span>, type=float)</div><div class="line">    parser.add_argument(<span class="string">"-f"</span>, <span class="string">"--format"</span>, help=<span class="string">"format the output"</span>, action=<span class="string">'store_true'</span>)</div><div class="line">    parser.add_argument(<span class="string">"-t"</span>, <span class="string">"--type"</span>, help=<span class="string">"output format type"</span>, choices=[<span class="string">"clean"</span>, <span class="string">"math"</span>, <span class="string">"string"</span>], default=<span class="string">"math"</span>)</div><div class="line">    <span class="comment"># parse arguments</span></div><div class="line">    args = parser.parse_args()</div><div class="line">    print(<span class="string">" - &#123;:^15&#125;: &#123;&#125;"</span>.format(<span class="string">"The string is"</span>, args.echo))</div><div class="line">    <span class="keyword">if</span> args.double:</div><div class="line">        <span class="keyword">if</span> <span class="keyword">not</span> args.format:</div><div class="line">            print(<span class="string">" - &#123;:^15&#125;: &#123;&#125;"</span>.format(<span class="string">"The rst is"</span>, <span class="number">2</span> * args.double))</div><div class="line">        <span class="keyword">else</span>:</div><div class="line">            <span class="keyword">if</span> args.type == <span class="string">"clean"</span>:</div><div class="line">                print(<span class="string">" - &#123;:^15&#125;: &#123;&#125;"</span>.format(<span class="string">"The rst is"</span>, <span class="number">2</span> * args.double))</div><div class="line">            <span class="keyword">elif</span> args.type == <span class="string">"string"</span>:</div><div class="line">                print(<span class="string">" - &#123;:^15&#125;: &#123;&#125;"</span>.format(<span class="string">"The double of &#123;:&gt;8&#125; is &#123;:&gt;8&#125;"</span>, args.double, <span class="number">2</span> * args.double))</div><div class="line">            <span class="keyword">else</span>:</div><div class="line">                print(<span class="string">" - &#123;:^15&#125;: &#123;&#125; * &#123;&#125; = &#123;&#125;"</span>.format(<span class="string">"The exp is"</span>, args.double, args.double, <span class="number">2</span> * args.double))</div><div class="line"></div><div class="line"></div><div class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</div><div class="line">    test()</div></pre></td></tr></table></figure></p>
<p>ä¾‹å­ä¸­æ¶‰åŠäº†4ç§å‚æ•°çš„ä½¿ç”¨æ–¹æ³•:</p>
<pre><code>1. echo: ä½ç½®å‚æ•°ï¼Œå¿…é¡»
2. -d: åŠ '-'è¡¨ç¤ºå¯é€‰å‚æ•°ï¼Œtypeé™å®šè¾“å…¥ç±»å‹
3. -f: æ ‡è®°å‚æ•°ï¼Œaction=store_true, è¾“å…¥ä»£è¡¨True,ä¸è¾“å…¥ä»£è¡¨Falseï¼Œåé¢ä¸è·Ÿå…¶ä»–å€¼
4. -t: é™å®šå‚æ•°çš„é€‰æ‹©èŒƒå›´ï¼š[&quot;clean&quot;, &quot;math&quot;, &quot;string&quot;]åªèƒ½æ˜¯ä¸‰è€…ä¹‹ä¸€ï¼› ç¼ºçœé»˜è®¤å€¼default=&quot;math&quot;ã€‚  
</code></pre>
<p>å®ä¾‹ï¼š
<img src="/images/python/argparse_rst1.PNG" alt="input">
<img src="/images/python/argparse_rst2.PNG" alt="output"></p>

        </div>
      </article>
    </div>
    <!-- Comments -->
    <div class="container">
      



    </div>
    <!-- Pre or Next -->
    <div class="nav-links">
      
        <div class="nav-previous">
          <a href="/2017/05/03/xpathé‚£äº›äº‹å„¿/" rel="prev"><span class="meta-arraw meta-arraw-left"></span> ä¸Šä¸€é </a>
        </div>
      
      
        <div class="nav-next">
          <a href="/2017/05/09/matplotlibç»˜å›¾ç¬”è®°/" rel="prev">ä¸‹ä¸€é  <span class="meta-arraw meta-arraw-right"></span></a>
        </div>
      
    </div>

  </div>
</div>


  <!-- Footer -->
  <!-- Footer-widgets -->
<div class="footer-widgets">
  <div class="row inside-wrapper">
    <div class="col-1-3">
      <aside>
        <h1 class="widget-title">Me</h1>
        <div class="custom-widget-content">
          
          <ul><li>MonkandMonkey</li></ul>
        </div>
      </aside>
    </div>
    <div class="col-1-3">
      <aside>
        <h1 class="widget-title">èˆ‡æˆ‘è¯ç³»</h1>
        <div class="widget-text">
          
            
              <a href="https://github.com/MonkandMonkey" class="icon icon-github" target="_blank">github</a>
            
              <a href="mailto:chenjing.amy@pku.edu.cn" class="icon icon-mail" target="_blank">mail</a>
            
          
        </div>
      </aside>
    </div>
    
    <div class="col-1-3">
      <aside>
        <h1 class="widget-title">ç«™å…§æœç´¢</h1>
        <div class="widget-text">
          <form onSubmit="return appDaily.submitSearch('')">
            <p>
              <input type="text" placeholder="search..." id="homeSearchInput">
            </p>
             <!--<input type="submit" value="GO">-->
          </form>
        </div>
      </aside>
    </div> 
  </div>
</div>
<!-- Footer -->
<footer class="site-info">
  <p>
    <span>Amy &copy; 2017</span>
    
      <span class="split">|</span>
      <span>Powered by MonkandMonkey</a></span>
    
  </p>
</footer>


  <!-- After footer scripts -->
  <!-- scripts -->
<script src="/js/app.js"></script>

<script>
  var disqus_shortname = 'monkandmonkey3';

  
  var disqus_url = 'http://localhost:4000/2017/05/07/ä½¿ç”¨python argparse ç¼–å†™å‹å¥½çš„å‘½ä»¤è¡Œæ¥å£/';
  

  (function(){
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/count.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script><!-- hexo-inject:begin --><!-- hexo-inject:end -->





</body>

</html>